Learning more about fastapi backend development from https://www.jeffastor.com/blog/up-and-running-with-fastapi-and-docker. 


Notes:

Adding first db after setting alembic file:
* Get into docker:
    * `docker ps` to list docker containers and `docker exec -it [CONTAINER_ID] bash` to enter docker
* once in docker environment:
    * run `alembic revision -m "create_main_tables"` 
    * After updating file generated by alembic structure of db run run `alembic upgrade head`

Adding new to exist db in postgres 
* First we have to rollback migrations 
    * Get into docker:
    * `docker ps` to list docker containers and `docker exec -it [CONTAINER_ID] bash` to enter docker
    * enter alembic downgrade base
* After making changes to the db file generated by alembic ealier
    * `run alembic upgrade head`
    
    

Accesing posgresdb in docker environment
* accessing db `docker-compose exec db psql -h localhost -U postgres --dbname=postgres`


Running Test
* Get into docker:
    * `docker ps` to list docker containers and `docker exec -it [CONTAINER_ID] bash` to enter docker
* enter `pytest -v` to run test


Auth. Service Process Breakdown:
* Users send their username, email and pwd to server
* check if email and username is unique. If clear salt and generated and use to hash the user's pwd. User and hashed password is stored in db.
* Taking the user's name or email address, we encode it into json web token and sends that token back to the user. 
* Any time the user needs to make a request to our API, they include the token we've sent them and we identify them by decoding its contents.


Generating secret key for JWT
* run `openssl rand -hex 32`